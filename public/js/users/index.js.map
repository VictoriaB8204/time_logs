{"version":3,"file":"/js/users/index.js","mappings":"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","sources":["webpack:///./resources/js/handle_errors.js","webpack:///./resources/js/refresh_block.js","webpack:///./resources/js/resize_textarea.js","webpack:///./resources/js/toasts.js","webpack:///./resources/js/users/index/destroy.js","webpack:///./resources/js/users/index/roles/show.js","webpack:///./resources/js/users/index/roles/update.js","webpack:///./resources/js/users/index/update.js","webpack:///./resources/js/serialize_tr.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./resources/js/users/index.js"],"sourcesContent":["import {showFailToast} from \"./toasts\";\n\nexport function handleError(error, infoMessage) {\n    console.log(error);\n    showFailToast(infoMessage + ' Ошибка ' + error.status + ' ' + error.statusText);\n}\n","import {resizeTextArea} from \"./resize_textarea\";\n\nexport function refresh(block, replace){\n    let ret = block.replaceWith(replace); // Call replaceWith\n\n    resizeTextArea();\n\n    return ret;  // For chaining\n}\n","export function resizeTextArea(){\n    $('textarea').each(function(){\n        console.log(this.scrollHeight);\n        $(this).outerHeight(38).outerHeight(this.scrollHeight);\n    })\n}\n","export function showSuccessToast(text) {\n    $('.toastSuccess').find('.toast-body').text(text);\n    bootstrap.Toast.getOrCreateInstance($('.toastSuccess')).show();\n}\n\nexport function showFailToast(text) {\n    $('.toastFail').find('.toast-body').text(text);\n    bootstrap.Toast.getOrCreateInstance($('.toastFail')).show();\n}\n\nexport function hideFailToast() {\n    bootstrap.Toast.getOrCreateInstance($('.toastFail')).hide();\n}\n","import {handleError} from \"../../handle_errors\";\nimport {refresh} from \"../../refresh_block\";\n\n$(document).on('click', '.destroy_user', function () {\n    if(confirm('Do you really want to delete user?')){\n        $.ajax({\n            url: 'users/' + $(this).closest('tr').find('.user_id').val(),\n            method: 'delete',\n            headers: {\n                'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n            },\n            error: function(error){\n                handleError(error, 'User delete failed');\n            },\n            success: function (result) {\n                refresh($('#users_table'), $(result));\n            }\n        })\n    }\n})\n","import {handleError} from \"../../../handle_errors\";\nimport {refresh} from \"../../../refresh_block\";\n\n$(document).on('click', '.show_roles_button', function () {\n    $.ajax({\n        url: 'users/' + $(this).closest('tr').find('.user_id').val() + '/roles',\n        method: 'get',\n        headers: {\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n        },\n        error: function(error){\n            handleError(error, 'Load user roles failed');\n        },\n        success: function (result) {\n            refresh($('#role_list'), $(result));\n        }\n    })\n})\n","import {handleError} from \"../../../handle_errors\";\nimport {showSuccessToast} from \"../../../toasts\";\n\nfunction serializeRoles(){\n    let data = [];\n    $('#role_list .user_role:checked').each(function () {\n        data.push($(this).val());\n    });\n    return data;\n}\n\n$(document).on('change', '.user_role', function () {\n    $.ajax({\n        url: 'users/' + $(this).closest('#role_list').find('#user_id').val() + '/roles',\n        method: 'post',\n        headers: {\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n        },\n        data: {\n            'roles': serializeRoles()\n        },\n        error: function(error){\n            handleError(error, 'Updating user roles failed');\n        },\n        success: function () {\n            showSuccessToast('User roles updated');\n        }\n    })\n})\n","import {handleError} from \"../../handle_errors\";\nimport {hideFailToast, showSuccessToast} from \"../../toasts\";\nimport {serializeTr} from \"../../serialize_tr\";\n\n$(document).on('change', '.user_form input', function () {\n    $.ajax({\n        url: 'users/' + $(this).closest('tr.user_form').find('.user_id').val(),\n        method: 'put',\n        headers: {\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n        },\n        data: serializeTr($(this).closest('tr.user_form')),\n        error: function(error){\n            handleError(error, 'User update failed');\n        },\n        success: function () {\n            hideFailToast();\n            showSuccessToast('User successfully updated');\n        }\n    })\n})\n","\nexport function serializeTr(tr){\n    let data = [];\n    tr.find('input, textarea, select').not('.serialize-disable').each(function () {\n        data.push(...$(this).serializeArray());\n    });\n    return data;\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","require('./index/update');\nrequire('./index/destroy');\nrequire('./index/roles/show');\nrequire('./index/roles/update');\n"],"names":["handleError","error","infoMessage","console","log","showFailToast","status","statusText","refresh","block","replace","ret","replaceWith","resizeTextArea","$","each","this","scrollHeight","outerHeight","showSuccessToast","text","find","bootstrap","Toast","getOrCreateInstance","show","hideFailToast","hide","document","on","confirm","ajax","url","closest","val","method","headers","attr","success","result","data","push","tr","not","serializeArray","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","require"],"sourceRoot":""}